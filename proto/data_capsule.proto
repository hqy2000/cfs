syntax = "proto3";
package proto.data_capsule;
option go_package = "lib/go_proto";

import "block.proto";

message DataCapsuleServerData {
  bytes id = 1;
  bytes writePubKey = 1000;
  map<string, block.DataCapsuleBlock> content = 2000;
  repeated string leafs = 3000;
}

message GetRequest {
  string blockHash = 1;
}

message GetResponse {
  optional block.DataCapsuleBlock block = 1;
}

message PutRequest {
  block.DataCapsuleBlock block = 1;
}

message PutResponse {
  bool success = 1;
}

message LeafsRequest {
}

message LeafsResponse {
  repeated string leafIds = 1;
}

service DataCapsule {
  rpc Get (GetRequest) returns (GetResponse);
  rpc Put (PutRequest) returns (PutResponse);
  rpc Leafs (LeafsRequest) returns (LeafsResponse);
}

